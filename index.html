<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Modelo Computacional</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/theme/black.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <style>
    button {
      padding: 12px 20px;
      background: #ff9800;
      border: none;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      font-size: 18px;
      margin-top: 20px;
    }
    button:hover { background: #e68900; }
    #map { height: 400px; width: 600px; }
    .pc-hacker {
      max-width: 700px;
      margin: 60px auto 0 auto;
      background: #181818;
      border-radius: 16px;
      box-shadow: 0 0 32px #00ff2a44, 0 0 0 4px #00ff2a22;
      padding: 32px 32px 40px 32px;
      font-family: 'Fira Mono', 'Consolas', monospace;
      position: relative;
    }
    .screen-header {
      display: flex;
      gap: 6px;
      margin-bottom: 18px;
    }
    .dot {
      width: 14px; height: 14px; border-radius: 50%;
      display: inline-block;
    }
    .red { background: #ff3b3b; }
    .yellow { background: #ffe22b; }
    .green { background: #2bff3b; }
    .screen-body {
      background: #111;
      border-radius: 8px;
      padding: 24px;
      box-shadow: 0 0 24px #00ff2a22 inset;
    }
    .hacker-terminal {
      font-size: 2.8em;
      color: #00ff2a;
      font-weight: bold;
      letter-spacing: 2px;
      margin-bottom: 18px;
      background: none;
      border: none;
      padding: 0;
    }
    .cursor {
      animation: blink 1s steps(1) infinite;
    }
    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }
    .hacker-fakecode {
      font-size: 1.2em;
      color: #00ffea;
      background: none;
      border: none;
      margin-bottom: 18px;
      min-height: 120px;
      padding: 0;
    }
    .hacker-btn {
      margin-top: 18px;
      font-size: 1.2em;
      background: #ff9800;
      color: #fff;
      border-radius: 8px;
      border: none;
      padding: 12px 32px;
      cursor: pointer;
      font-family: inherit;
      font-weight: bold;
      box-shadow: 0 2px 8px #0004;
      transition: background 0.2s;
    }
    .hacker-btn:hover { background: #e68900; }
    /* Overlay para activar sonido */
    #sound-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: #111d;
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: inherit;
    }
    #sound-overlay .overlay-content {
      background: #222;
      color: #00ff2a;
      padding: 40px 60px;
      border-radius: 16px;
      box-shadow: 0 0 32px #00ff2a44;
      text-align: center;
      font-size: 2em;
      font-weight: bold;
      cursor: pointer;
      border: 2px solid #00ff2a;
    }
    #sound-overlay .overlay-content:hover {
      background: #111;
      color: #fff;
      border-color: #fff;
    }
  </style>
</head>
<body>
  <!-- Overlay para activar sonido -->
  <div id="sound-overlay">
    <div class="overlay-content">
      Haz clic para activar el sonido y la animación 
    </div>
  </div>
  <div class="reveal">
    <div class="slides">

      <!-- Slide 1 -->
      <section>
        <div class="pc-hacker">
          <div class="screen-header">
            <span class="dot red"></span>
            <span class="dot yellow"></span>
            <span class="dot green"></span>
          </div>
          <div class="screen-body">
            <pre class="hacker-terminal"><span id="typewriter"></span><span class="cursor">█</span></pre>
            <pre class="hacker-fakecode" id="fakecode"></pre>
            <button class="hacker-btn" id="btn-iniciar">Inicial</button>
            <audio id="hacker-audio" src="assets/hacker-keyboard.mp3" preload="auto"></audio>
            <audio id="loading-audio" src="assets/loading-effect.mp3" preload="auto"></audio>

          </div>
        </div>
      </section>

      <!-- Slide 2: igual estilo hacker que el Slide 1 -->
      <section>
        <div class="pc-hacker">
          <div class="screen-header">
            <span class="dot red"></span>
            <span class="dot yellow"></span>
            <span class="dot green"></span>
          </div>
          <div class="screen-body" style="display: flex; flex-direction: column; align-items: center;">
            <pre class="hacker-terminal"><span id="typewriter-slide2"></span><span class="cursor">█</span></pre>
            <pre class="hacker-fakecode" id="fakecode-slide2" style="width: 100%; max-width: 600px; text-align: left; margin-bottom: 18px; white-space: pre-wrap;"></pre>
            <div style="display: flex; gap: 10px; margin-top: 10px;">
              
              <button class="hacker-btn" id="btn-tracker-slide2" style="padding: 8px 20px; font-size: 1em;"
                onclick="window.open('https://globalsumudflotilla.org/tracker/', '_blank')">Ver Tracker</button>
              <button class="hacker-btn" id="btn-iniciar-slide2" style="padding: 8px 20px; font-size: 1em;">Continuar</button>
            </div>
            <audio id="hacker-audio-slide2" src="assets/hacker-keyboard.mp3" preload="auto"></audio>
            <audio id="loading-audio-slide2" src="assets/loading-effect.mp3" preload="auto"></audio>
          </div>
        </div>
      </section>
      <section>
        <div class="pc-hacker">
          <div class="screen-header">
            <span class="dot red"></span>
            <span class="dot yellow"></span>
            <span class="dot green"></span>
          </div>
          <div class="screen-body" style="display: flex; flex-direction: column; align-items: center;">
            <pre class="hacker-terminal"><span id="typewriter-slide3"></span><span class="cursor">█</span></pre>
            <pre class="hacker-fakecode" id="fakecode-slide3" style="width: 100%; max-width: 600px; text-align: left; margin-bottom: 18px; white-space: pre-wrap;"></pre>
            <div style="display: flex; gap: 10px; margin-top: 10px;">
              <button class="hacker-btn" id="btn-colab-slide3" style="padding: 8px 20px; font-size: 1em;"
                onclick="window.open('https://colab.research.google.com/drive/1-uL1YMX27l_LfltoxIYV8ypKHR4MKQtb?usp=sharing', '_blank')">
                Abrir notebook interactivo en Google Colab
              </button>
            </div>
            <audio id="hacker-audio-slide3" src="assets/hacker-keyboard.mp3" preload="auto"></audio>
            <audio id="loading-audio-slide3" src="assets/loading-effect.mp3" preload="auto"></audio>
          </div>
        </div>
      </section>
     

    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js/plugin/math/math.js"></script>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    Reveal.initialize({
      hash: true,
      plugins: [ RevealMath.KaTeX ]
    });

    // Animación de texto tipo hacker, cursor parpadeante y líneas de código falsas
    function startHackerIntro() {
      var text = 'MODELO COMPUTACIONAL';
      var typewriter = document.getElementById('typewriter');
      var btn = document.getElementById('btn-iniciar');
      var audio = document.getElementById('hacker-audio');
      var loadingAudio = document.getElementById('loading-audio');
      var fakecode = document.getElementById('fakecode');
      var codeLines = [
        '>>> Initializing system... [OK]',
        '>>> Loading modules: model.py, compute.js, style.css',
        '>>> Connecting to server 127.0.0.1:8080',
        '>>> Access granted. Welcome, user.',
        '>>> Running: modelo_computacional()',
        '>>> Output: Ready for computation.'
      ];
      var i = 0;
      var speed = 80;
      // Deshabilita el botón hasta que termine el efecto hacker
      btn.disabled = true;
      btn.style.opacity = "0.5";
      // Cursor parpadeante
      var cursor = document.querySelector('.cursor');
      setInterval(function(){
        if(cursor) cursor.style.opacity = (cursor.style.opacity === '0' ? '1' : '0');
      }, 500);

      // Animación de texto y código
      function typeEffect() {
        if (i < text.length) {
          typewriter.textContent += text.charAt(i);
          i++;
          setTimeout(typeEffect, speed);
        } else {
          // Sonido de teclado mientras se muestra el código falso
          if(audio) {
            audio.currentTime = 0;
            audio.play();
          }
          // Mostrar líneas de código falsas una a una
          let j = 0;
          function showCodeLine() {
            if (j < codeLines.length) {
              fakecode.textContent += codeLines[j] + '\n';
              j++;
              setTimeout(showCodeLine, 350);
            } else {
              if(audio) audio.pause(); // Detener sonido al terminar
              // Habilita el botón "Inicial" al terminar el efecto hacker
              btn.disabled = false;
              btn.style.opacity = "1";
            }
          }
          showCodeLine();
        }
      }
      typeEffect();

      // Sonido de carga y avanzar al hacer clic en el botón
      if(btn && loadingAudio) {
        btn.addEventListener('click', function() {
          loadingAudio.currentTime = 0;
          loadingAudio.play();
          setTimeout(function(){ Reveal.next(); }, 900);
        });
      }
    }

    // Espera la interacción del usuario para iniciar animación y sonido
    document.addEventListener('DOMContentLoaded', function() {
      var overlay = document.getElementById('sound-overlay');
      overlay.addEventListener('click', function() {
        overlay.style.display = 'none';
        startHackerIntro();
      });
    });

    // activar mapa en slide 7
    Reveal.on('slidechanged', e => {
      if(e.indexh === 6 && !window.map){
        window.map = L.map('map').setView([31.7758, 33.1708], 6);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
        L.marker([31.7758, 33.1708]).addTo(map).bindPopup("Meteque").openPopup();
        L.marker([31.5, 34.47]).addTo(map).bindPopup("Destino");
      }
    });

    // Animación hacker para el título de identificación del problema
    document.addEventListener('DOMContentLoaded', function() {
      var text = '1️⃣ Identificación del Problema';
      var typewriter = document.getElementById('typewriter-identificacion');
      if(typewriter){
        typewriter.textContent = '';
        let i = 0;
        function type() {
          if (i < text.length) {
            typewriter.textContent += text.charAt(i);
            i++;
            setTimeout(type, 60);
          }
        }
        type();
      }
    });

    // Animación y sonido hacker para Slide 2
    Reveal.on('slidechanged', function(e) {
      if (e.indexh === 1) { // Slide 2
        var text = '¿Qué es un modelo computacional?';
        var typewriter = document.getElementById('typewriter-slide2');
        var btn = document.getElementById('btn-iniciar-slide2');
        var audio = document.getElementById('hacker-audio-slide2');
        var loadingAudio = document.getElementById('loading-audio-slide2');
        var fakecode = document.getElementById('fakecode-slide2');
        var codeLines = [
          '>>Representación matemática de un sistema complejo que se utiliza para estudiar su comportamiento a través de la simulación por computadora.',
          '>>Ejemplo: Caso real: trayecto del Meteque hacia Gaza.',
          '>>>- Matemático → Haversine para calcular distancias.',
          '>>>- Computacional → función Python que recibe coordenadas y entrega la distancia.',
          
        ];
        if(typewriter && fakecode && btn && audio && loadingAudio) {
          typewriter.textContent = '';
          fakecode.textContent = '';
          btn.disabled = true;
          btn.style.opacity = "0.5";
          let i = 0;
          function typeEffect() {
            if (i < text.length) {
              typewriter.textContent += text.charAt(i);
              i++;
              setTimeout(typeEffect, 60);
            } else {
              // Sonido de teclado mientras se muestra el código falso
              audio.currentTime = 0;
              audio.play();
              let j = 0;
              function showCodeLine() {
                if (j < codeLines.length) {
                  fakecode.textContent += codeLines[j] + '\n';
                  j++;
                  setTimeout(showCodeLine, 350);
                } else {
                  audio.pause();
                  btn.disabled = false;
                  btn.style.opacity = "1";
                }
              }
              showCodeLine();
            }
          }
          typeEffect();
          btn.onclick = function() {
            loadingAudio.currentTime = 0;
            loadingAudio.play();
            setTimeout(function(){ Reveal.next(); }, 900);
          };
        }
      }
    });

    // Animación y sonido hacker para Slide 3
    Reveal.on('slidechanged', function(e) {
      if (e.indexh === 2) { // Slide 3
        var text = '2️⃣ Caso real: Meteque (Qalqilya)';
        var typewriter = document.getElementById('typewriter-slide3');
        var audio = document.getElementById('hacker-audio-slide3');
        var fakecode = document.getElementById('fakecode-slide3');
        var codeLines = [
          'Datos reales del tracker:',
          '- Latitud: 31.7758° N',
          '- Longitud: 33.1708° E',
          '- Velocidad: 2.16 nudos',
          '- Course (rumbo): 112.5°',
          '- Estado: assumed intercepted',
          '- Destino: Gaza (31.5° N, 34.47° E)',
          '',
          'Aplicaremos el modelo matemático.',
          'Puedes explorar el notebook interactivo abajo.'
        ];
        if(typewriter && fakecode && audio) {
          typewriter.textContent = '';
          fakecode.textContent = '';
          let i = 0;
          function typeEffect() {
            if (i < text.length) {
              typewriter.textContent += text.charAt(i);
              i++;
              setTimeout(typeEffect, 60);
            } else {
              audio.currentTime = 0;
              audio.play();
              let j = 0;
              function showCodeLine() {
                if (j < codeLines.length) {
                  fakecode.textContent += codeLines[j] + '\n';
                  j++;
                  setTimeout(showCodeLine, 350);
                } else {
                  audio.pause();
                }
              }
              showCodeLine();
            }
          }
          typeEffect();
        }
      }
    });
  </script>
</body>
</html>
